{"version":3,"sources":["pages/home/Home.module.css","components/Navbar.module.css","pages/login/Login.module.css","pages/signup/Signup.module.css","firebase/config.js","context/AuthContext.js","hooks/useAuthContext.js","hooks/useFirestore.js","pages/home/TransactionForm.js","pages/home/TransactionList.js","pages/home/Home.js","hooks/useCollection.js","hooks/useLogin.js","pages/login/Login.js","hooks/useSignup.js","pages/signup/Signup.js","hooks/useLogout.js","components/Navbar.js","App.js","index.js"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","projectFirestore","firestore","projectAuth","auth","timestamp","Timestamp","AuthContext","createContext","authReducer","state","action","type","user","payload","authIsReady","AuthContextProvider","children","useReducer","dispatch","useEffect","unsub","onAuthStateChanged","console","log","Provider","value","useAuthContext","context","useContext","Error","initialState","document","isPending","error","success","firestoreReducer","useFirestore","collection","response","useState","isCancelled","setIsCancelled","ref","dispatchIfNotCancelled","addDocument","doc","a","createdAt","fromDate","Date","add","addedDocument","message","deleteDocument","id","delete","TransactionForm","uid","name","setName","amount","setAmount","onSubmit","e","preventDefault","required","onChange","target","TransactionList","transactions","className","styles","map","transaction","onClick","Home","_query","_orderBy","documents","setDocuments","setError","query","useRef","current","orderBy","where","unsubscribe","onSnapshot","snapshot","results","docs","forEach","push","data","useCollection","container","content","sidebar","Login","email","setEmail","password","setPassword","setIsPending","login","signInWithEmailAndPassword","res","useLogin","disabled","Signup","displayName","setDisplayName","signup","createUserWithEmailAndPassword","updateProfile","useSignup","Navbar","logout","signOut","useLogout","navbar","title","to","App","exact","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.126243ff.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Home_container__EPmmK\",\"content\":\"Home_content__201zp\",\"sidebar\":\"Home_sidebar__1Te-n\",\"transactions\":\"Home_transactions__382X-\",\"name\":\"Home_name__4y3Om\",\"amount\":\"Home_amount__1MLAJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"Navbar_navbar__1N13Y\",\"title\":\"Navbar_title__3s5BV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login-form\":\"Login_login-form__1PFnI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"signup-form\":\"Signup_signup-form__Qocbv\"};","import firebase from 'firebase/app'\r\nimport 'firebase/firestore'\r\nimport 'firebase/auth'\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBoWa8IZlNuunsxJL6-BcIIpom0rf377GI\",\r\n  authDomain: \"mymoney-b11cd.firebaseapp.com\",\r\n  projectId: \"mymoney-b11cd\",\r\n  storageBucket: \"mymoney-b11cd.appspot.com\",\r\n  messagingSenderId: \"916505174384\",\r\n  appId: \"1:916505174384:web:eea93f8c7227daa243efb5\"\r\n};\r\n\r\n// init firebase\r\nfirebase.initializeApp(firebaseConfig)\r\n\r\n// init services\r\nconst projectFirestore = firebase.firestore()\r\nconst projectAuth = firebase.auth()\r\n\r\n// timestamp\r\nconst timestamp = firebase.firestore.Timestamp\r\n\r\nexport { projectFirestore, projectAuth, timestamp }","import { createContext, useReducer, useEffect } from 'react'\r\nimport { projectAuth } from '../firebase/config'\r\n\r\nexport const AuthContext = createContext()\r\n\r\nexport const authReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'LOGIN':\r\n      return { ...state, user: action.payload }\r\n    case 'LOGOUT':\r\n      return { ...state, user: null }\r\n    case 'AUTH_IS_READY':\r\n      return { user: action.payload, authIsReady: true }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const AuthContextProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(authReducer, { \r\n    user: null,\r\n    authIsReady: false\r\n  })\r\n\r\n  useEffect(() => {\r\n    const unsub = projectAuth.onAuthStateChanged(user => {\r\n      dispatch({ type: 'AUTH_IS_READY', payload: user })\r\n      unsub()\r\n    })\r\n  }, [])\r\n\r\n  console.log('AuthContext state:', state)\r\n  \r\n  return (\r\n    <AuthContext.Provider value={{ ...state, dispatch }}>\r\n      { children }\r\n    </AuthContext.Provider>\r\n  )\r\n\r\n}","import { AuthContext } from \"../context/AuthContext\"\r\nimport { useContext } from \"react\"\r\n\r\nexport const useAuthContext = () => {\r\n  const context = useContext(AuthContext)\r\n\r\n  if(!context) {\r\n    throw Error('useAuthContext must be used inside an AuthContextProvider')\r\n  }\r\n\r\n  return context\r\n}","import { useReducer, useEffect, useState } from \"react\"\r\nimport { projectFirestore, timestamp } from \"../firebase/config\"\r\n\r\nlet initialState = {\r\n  document: null,\r\n  isPending: false,\r\n  error: null,\r\n  success: null\r\n}\r\n\r\nconst firestoreReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'IS_PENDING':\r\n      return { isPending: true, document: null, success: false, error: null }\r\n    case 'ADDED_DOCUMENT':\r\n      return { isPending: false, document: action.payload, success: true, error: null }\r\n    case 'DELETED_DOCUMENT':\r\n      return { isPending: false, document: null, success: true, error: null }\r\n    case 'ERROR':\r\n      return { isPending: false, document: null, success: false, error: action.payload }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const useFirestore = (collection) => {\r\n  const [response, dispatch] = useReducer(firestoreReducer, initialState)\r\n  const [isCancelled, setIsCancelled] = useState(false)\r\n\r\n  // collection ref\r\n  const ref = projectFirestore.collection(collection)\r\n\r\n  // only dispatch is not cancelled\r\n  const dispatchIfNotCancelled = (action) => {\r\n    if (!isCancelled) {\r\n      dispatch(action)\r\n    }\r\n  }\r\n\r\n  // add a document\r\n  const addDocument = async (doc) => {\r\n    dispatch({ type: 'IS_PENDING' })\r\n\r\n    try {\r\n      const createdAt = timestamp.fromDate(new Date())\r\n      const addedDocument = await ref.add({ ...doc, createdAt })\r\n      dispatchIfNotCancelled({ type: 'ADDED_DOCUMENT', payload: addedDocument })\r\n    }\r\n    catch (err) {\r\n      dispatchIfNotCancelled({ type: 'ERROR', payload: err.message })\r\n    }\r\n  }\r\n\r\n  // delete a document\r\n  const deleteDocument = async (id) => {\r\n    dispatch({ type: 'IS_PENDING' })\r\n\r\n    try {\r\n      await ref.doc(id).delete()\r\n      dispatchIfNotCancelled({ type: 'DELETED_DOCUMENT' })\r\n    }\r\n    catch (err) {\r\n      dispatchIfNotCancelled({ type: 'ERROR', payload: 'could not delete' })\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    return () => setIsCancelled(true)\r\n  }, [])\r\n\r\n  return { addDocument, deleteDocument, response }\r\n\r\n}","import { useState, useEffect } from 'react'\r\nimport { useFirestore } from '../../hooks/useFirestore'\r\n\r\nexport default function TransactionForm({ uid }) {\r\n  const [name, setName] = useState('')\r\n  const [amount, setAmount] = useState('')\r\n  const { addDocument, response } = useFirestore('transactions')\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    addDocument({\r\n      uid, \r\n      name, \r\n      amount,\r\n    })\r\n  }\r\n\r\n  // reset the form fields\r\n  useEffect(() => {\r\n    if (response.success) {\r\n      setName('')\r\n      setAmount('')\r\n    }\r\n  }, [response.success])\r\n\r\n  return (\r\n    <>\r\n      <h3>Add a Transaction</h3>\r\n      <form onSubmit={handleSubmit}>\r\n        <label>\r\n          <span>Transaction name:</span>\r\n          <input \r\n            type=\"text\"\r\n            required\r\n            onChange={(e) => setName(e.target.value)} \r\n            value={name} \r\n          />\r\n        </label>\r\n        <label>\r\n          <span>Amount (Rs.):</span>\r\n          <input\r\n            type=\"number\"\r\n            required\r\n            onChange={(e) => setAmount(e.target.value)} \r\n            value={amount} \r\n          />\r\n        </label>\r\n        <button>Add Transaction</button>\r\n      </form>\r\n    </>\r\n  )\r\n}","import { useFirestore } from '../../hooks/useFirestore'\r\n\r\n// styles\r\nimport styles from './Home.module.css'\r\n\r\nexport default function TransactionList({ transactions }) {\r\n  const { deleteDocument } = useFirestore('transactions')\r\n\r\n  return (\r\n    <ul className={styles.transactions}>\r\n      {transactions.map((transaction) => (\r\n        <li key={transaction.id}>\r\n          <p className={styles.name}>{transaction.name}</p>\r\n          <p className={styles.amount}>Rs.{transaction.amount}</p>\r\n          <button onClick={() => deleteDocument(transaction.id)}>x</button>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  )\r\n}","import { useAuthContext } from '../../hooks/useAuthContext'\nimport { useCollection } from '../../hooks/useCollection'\n\n// styles\nimport styles from './Home.module.css'\n\n// components\nimport TransactionForm from './TransactionForm'\nimport TransactionList from './TransactionList'\n\nexport default function Home() {\n  const { user } = useAuthContext()\n  const { documents, error } = useCollection(\n    'transactions', [\"uid\", \"==\", user.uid], ['createdAt', 'desc']\n  )\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.content}>\n        {error && <p>{error}</p>}\n        {documents && <TransactionList transactions={documents} />}\n      </div>\n      <div className={styles.sidebar}>\n        <TransactionForm uid={user.uid} />\n      </div>\n    </div>\n  )\n}","import { useEffect, useState, useRef } from \"react\"\r\nimport { projectFirestore } from \"../firebase/config\"\r\n\r\nexport const useCollection = (collection, _query, _orderBy) => {\r\n  const [documents, setDocuments] = useState(null)\r\n  const [error, setError] = useState(null)\r\n\r\n  // if we don't use a ref --> infinite loop in useEffect\r\n  // _query is an array and is \"different\" on every function call\r\n  const query = useRef(_query).current\r\n  const orderBy = useRef(_orderBy).current\r\n\r\n  useEffect(() => {\r\n    let ref = projectFirestore.collection(collection)\r\n\r\n    if (query) {\r\n      ref = ref.where(...query)\r\n    }\r\n    if (orderBy) {\r\n      ref = ref.orderBy(...orderBy)\r\n    }\r\n\r\n    const unsubscribe = ref.onSnapshot(snapshot => {\r\n      let results = []\r\n      snapshot.docs.forEach(doc => {\r\n        console.log(doc)\r\n        results.push({...doc.data(), id: doc.id})\r\n      });\r\n      \r\n      // update state\r\n      setDocuments(results)\r\n      setError(null)\r\n    }, error => {\r\n      console.log(error)\r\n      setError('could not fetch the data')\r\n    })\r\n\r\n    // unsubscribe on unmount\r\n    return () => unsubscribe()\r\n\r\n  }, [collection, query, orderBy])\r\n\r\n  return { documents, error }\r\n}\r\n\r\n","import { useState, useEffect } from 'react'\r\nimport { projectAuth } from '../firebase/config'\r\nimport { useAuthContext } from './useAuthContext'\r\n\r\nexport const useLogin = () => {\r\n  const [isCancelled, setIsCancelled] = useState(false)\r\n  const [error, setError] = useState(null)\r\n  const [isPending, setIsPending] = useState(false)\r\n  const { dispatch } = useAuthContext()\r\n\r\n  const login = async (email, password) => {\r\n    setError(null)\r\n    setIsPending(true)\r\n  \r\n    try {\r\n      // login\r\n      const res = await projectAuth.signInWithEmailAndPassword(email, password)\r\n\r\n      // dispatch login action\r\n      dispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n      if (!isCancelled) {\r\n        setIsPending(false)\r\n        setError(null)\r\n      }\r\n    } \r\n    catch(err) {\r\n      if (!isCancelled) {\r\n        setError(err.message)\r\n        setIsPending(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    return () => setIsCancelled(true)\r\n  }, [])\r\n\r\n  return { login, isPending, error }\r\n}","import { useState } from 'react'\nimport { useLogin } from '../../hooks/useLogin'\n\n// styles\nimport styles from './Login.module.css'\n\nexport default function Login() {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const { login, error, isPending } = useLogin()\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    login(email, password)\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className={styles['login-form']}>\n      <h2>login</h2>\n      <label>\n        <span>email:</span>\n        <input \n          type=\"email\" \n          onChange={(e) => setEmail(e.target.value)} \n          value={email}\n        />\n      </label>\n      <label>\n        <span>password:</span>\n        <input \n          type=\"password\" \n          onChange={(e) => setPassword(e.target.value)} \n          value={password} \n        />\n      </label>\n      { !isPending && <button className=\"btn\">Login</button> }\n      { isPending && <button className=\"btn\" disabled>loading</button> }\n      { error && <p>{error}</p> }\n    </form>\n  )\n}","import { useState, useEffect } from 'react'\r\nimport { projectAuth } from '../firebase/config'\r\nimport { useAuthContext } from './useAuthContext'\r\n\r\nexport const useSignup = () => {\r\n  const [isCancelled, setIsCancelled] = useState(false)\r\n  const [error, setError] = useState(null)\r\n  const [isPending, setIsPending] = useState(false)\r\n  const { dispatch } = useAuthContext()\r\n\r\n  const signup = async (email, password, displayName) => {\r\n    setError(null)\r\n    setIsPending(true)\r\n  \r\n    try {\r\n      // signup\r\n      const res = await projectAuth.createUserWithEmailAndPassword(email, password)\r\n\r\n      if (!res) {\r\n        throw new Error('Could not complete signup')\r\n      }\r\n\r\n      // add display name to user\r\n      await res.user.updateProfile({ displayName })\r\n\r\n      // dispatch login action\r\n      dispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n      if (!isCancelled) {\r\n        setIsPending(false)\r\n        setError(null)\r\n      }\r\n    } \r\n    catch(err) {\r\n      if (!isCancelled) {\r\n        setError(err.message)\r\n        setIsPending(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    return () => setIsCancelled(true)\r\n  }, [])\r\n\r\n  return { signup, error, isPending }\r\n}","import { useState } from 'react'\nimport { useSignup } from '../../hooks/useSignup'\n\n// styles\nimport styles from './Signup.module.css'\n\nexport default function Signup() {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [displayName, setDisplayName] = useState('')\n  const { signup, isPending, error } = useSignup()\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    signup(email, password, displayName)\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className={styles['signup-form']}>\n      <h2>sign up</h2>\n      <label>\n        <span>email:</span>\n        <input \n          type=\"email\" \n          onChange={(e) => setEmail(e.target.value)} \n          value={email}\n        />\n      </label>\n      <label>\n        <span>password:</span>\n        <input \n          type=\"password\" \n          onChange={(e) => setPassword(e.target.value)} \n          value={password} \n        />\n      </label>\n      <label>\n        <span>display name:</span>\n        <input \n          type=\"text\" \n          onChange={(e) => setDisplayName(e.target.value)}\n          value={displayName}\n        />\n      </label>\n      { !isPending && <button className=\"btn\">sign up</button> }\n      { isPending && <button className=\"btn\" disabled>loading</button> }\n      { error && <p>{error}</p> }\n    </form>\n  )\n}","import { useEffect, useState } from 'react'\r\nimport { projectAuth } from '../firebase/config'\r\nimport { useAuthContext } from './useAuthContext'\r\n\r\nexport const useLogout = () => {\r\n  const [isCancelled, setIsCancelled] = useState(false)\r\n  const [error, setError] = useState(null)\r\n  const [isPending, setIsPending] = useState(false)\r\n  const { dispatch } = useAuthContext()\r\n  \r\n  const logout = async () => {\r\n    setError(null)\r\n    setIsPending(true)\r\n\r\n    try {\r\n      // sign the user out\r\n      await projectAuth.signOut()\r\n      \r\n      // dispatch logout action\r\n      dispatch({ type: 'LOGOUT' })\r\n\r\n      // update state\r\n      if (!isCancelled) {\r\n        setIsPending(false)\r\n        setError(null)\r\n      } \r\n    } \r\n    catch(err) {\r\n      if (!isCancelled) {\r\n        setError(err.message)\r\n        setIsPending(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    return () => setIsCancelled(true)\r\n  }, [])\r\n\r\n  return { logout, error, isPending }\r\n}","import { Link } from \"react-router-dom\"\nimport { useAuthContext } from \"../hooks/useAuthContext\"\nimport { useLogout } from '../hooks/useLogout'\n\n// styles\nimport styles from './Navbar.module.css'\n\nexport default function Navbar() {\n  const { logout } = useLogout()\n  const { user } = useAuthContext()\n\n  return (\n    <nav className={styles.navbar}>\n      <ul>\n        <li className={styles.title}>myMoney</li>\n        \n        {!user && (\n          <>\n            <li><Link to=\"/login\">Login</Link></li>\n            <li><Link to=\"/signup\">Signup</Link></li>\n          </>\n        )}\n\n        {user && (\n          <>\n            <li>hello, {user.displayName}</li>\n            <li>\n              <button className=\"btn\" onClick={logout}>Logout</button>\n            </li>\n          </>\n        )}\n      </ul>\n    </nav>\n  )\n}","import { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom'\nimport { useAuthContext } from './hooks/useAuthContext'\n\n// pages & components\nimport Home from './pages/home/Home'\nimport Login from './pages/login/Login'\nimport Signup from './pages/signup/Signup'\nimport Navbar from './components/Navbar'\n\nfunction App() {\n  const { authIsReady, user } = useAuthContext()\n\n  return (\n    <div className=\"App\">\n      {authIsReady && (\n        <BrowserRouter>\n          <Navbar />\n          <Switch>\n            <Route exact path=\"/\">\n              {!user && <Redirect to=\"/login\" />}\n              {user && <Home />}\n            </Route>\n            <Route path=\"/login\">\n              {user && <Redirect to=\"/\" />}\n              {!user && <Login />}\n            </Route>\n            <Route path=\"/signup\">\n              {user && user.displayName && <Redirect to=\"/\" />}\n              {!user && <Signup />}\n            </Route>\n          </Switch>\n        </BrowserRouter>\n      )}\n    </div>\n  );\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { AuthContextProvider } from './context/AuthContext';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <App />\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}